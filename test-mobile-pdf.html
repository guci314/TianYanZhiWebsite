<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§»åŠ¨ç«¯PDFæµ‹è¯•</title>
    <style>
        /* å¼•å…¥æˆ‘ä»¬çš„CSSæ ·å¼ */
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        
        /* å¤åˆ¶æˆ‘ä»¬çš„CSSæ ·å¼ */
        .dcmp-watermark {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            opacity: 0.15;
            font-size: 2rem;
            color: #888;
            text-align: center;
            z-index: 9999;
            user-select: none;
            white-space: pre-wrap;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .dcmp-media-container {
            position: relative;
            display: block;
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .dcmp-pdf-container {
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        @media screen and (max-width: 768px) {
            .dcmp-watermark {
                font-size: 1.2rem;
                opacity: 0.1;
            }
            
            .dcmp-media-container {
                margin: 10px 0;
            }
            
            .dcmp-pdf-container iframe {
                min-height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“± ç§»åŠ¨ç«¯PDFæµ‹è¯•é¡µé¢</h1>
        
        <div id="device-info" style="background: #e7f3ff; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
            <strong>è®¾å¤‡ä¿¡æ¯:</strong> <span id="device-details">æ£€æµ‹ä¸­...</span>
        </div>
        
        <h2>æµ‹è¯•1: ç®€å•çš„PDFæ˜¾ç¤º</h2>
        <div id="pdf-test-1">
            <!-- è¿™é‡Œä¼šåŠ¨æ€æ’å…¥PDFæŸ¥çœ‹å™¨ -->
        </div>
        
        <h2>æµ‹è¯•2: å¤–éƒ¨PDFé“¾æ¥</h2>
        <div style="border: 1px solid #ccc; padding: 20px; text-align: center;">
            <p>ç”±äºå®‰å…¨é™åˆ¶ï¼Œæ­¤æµ‹è¯•éœ€è¦çœŸå®çš„PDFæ–‡ä»¶</p>
            <a href="https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf" target="_blank">
                ğŸ“„ æ‰“å¼€æµ‹è¯•PDF (å¤–éƒ¨é“¾æ¥)
            </a>
        </div>
        
        <h2>è°ƒè¯•ä¿¡æ¯</h2>
        <div id="debug-info" style="background: #f0f0f0; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 12px;">
            <!-- è°ƒè¯•ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
    </div>
    
    <script>
        // è®¾å¤‡æ£€æµ‹åŠŸèƒ½ (ä»æˆ‘ä»¬çš„ä»£ç ä¸­å¤åˆ¶)
        function detectDevice() {
            const userAgent = navigator.userAgent;
            const isMobile = /Mobi|Android/i.test(userAgent);
            const isIOS = /iPhone|iPad|iPod/i.test(userAgent);
            const isAndroid = /Android/i.test(userAgent);
            const isSafari = /Safari/.test(userAgent) && !/Chrome/.test(userAgent);
            const isChrome = /Chrome/.test(userAgent);
            const isFirefox = /Firefox/.test(userAgent);
            
            return {
                isMobile,
                isIOS, 
                isAndroid,
                isSafari,
                isChrome,
                isFirefox,
                userAgent,
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                viewportWidth: window.innerWidth,
                viewportHeight: window.innerHeight
            };
        }
        
        // ç”Ÿæˆç§»åŠ¨ç«¯PDFæŸ¥çœ‹å™¨ (ç®€åŒ–ç‰ˆ)
        function generateMobilePdfViewer() {
            const device = detectDevice();
            const testPdfUrl = 'data:application/pdf;base64,JVBERi0xLjMKJcTl8uXrp/Og0MTGCjQgMCBvYmoKPDwKL0xlbmd0aCA5NTIKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFtCnicY2BgYGAYxYABAAoAAQplbmRzdHJlYW0KZW5kb2JqCjEgMCBvYmoKPDwKL1R5cGUgL0NhdGFsb2cKL091dGxpbmVzIDIgMCBSCi9QYWdlcyAzIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovVHlwZSAvT3V0bGluZXMKL0NvdW50IDAKPD4KZW5kb2JqCjMgMCBvYmoKPDwKL1R5cGUgL1BhZ2VzCi9Db3VudCAxCi9LaWRzIFs0IDAgUl0KPj4KZW5kb2JqCjQgMCBvYmoKPDwKL1R5cGUgL1BhZ2UKL1BhcmVudCAzIDAgUgovUmVzb3VyY2VzIDw8Ci9Gb250IDw8Ci9GMSAiIDAgUgo+Pgo+PgovTWVkaWFCb3ggWzAgMCA2MTIgNzkyXQovQ29udGVudHMgNSAwIFIKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0xlbmd0aCA0NAo+PgpzdHJlYW0KQlQKL0YxIDEyIFRmCjcyIDcyMCBUZAooVGVzdCBQREYpIFRqCkVUCmVuZHN0cmVhbQplbmRvYmoKNiAwIG9iago8PAovVHlwZSAvRm9udAovU3VidHlwZSAvVHlwZTEKL0Jhc2VGb250IC9IZWx2ZXRpY2EKPj4KZW5kb2JqCnhyZWYKMCA3CjAwMDAwMDAwMDAgNjU1MzUgZiAKMDAwMDAwMDA2MyAwMDAwMCBuIAowMDAwMDAwMTI0IDAwMDAwIG4gCjAwMDAwMDAxODEgMDAwMDAgbiAKMDAwMDAwMDIzOCAwMDAwMCBuIAowMDAwMDAwMzk0IDAwMDAwIG4gCjAwMDAwMDA0ODggMDAwMDAgbiAKdHJhaWxlcgo8PAovU2l6ZSA3Ci9Sb290IDEgMCBSCj4+CnN0YXJ0eHJlZgo1ODUKJSVFT0Y=';
            
            let html = '';
            
            if (device.isMobile) {
                if (device.isIOS && device.isSafari) {
                    // iOS Safari
                    html = `
                    <div class="dcmp-pdf-ios-container" style="width:100%; height:400px; border:1px solid #ccc; background:#f9f9f9; display:flex; flex-direction:column; border-radius:8px; overflow:hidden;">
                        <div style="background:#007cba; color:white; padding:12px; text-align:center; font-size:16px;">
                            ğŸ“„ iOS PDFæŸ¥çœ‹å™¨
                        </div>
                        <div style="flex:1; position:relative; background:white;">
                            <iframe src="${testPdfUrl}" style="width:100%; height:100%; border:none;"></iframe>
                        </div>
                        <div style="background:#f0f0f0; padding:10px; text-align:center; border-top:1px solid #ddd;">
                            <a href="${testPdfUrl}" target="_blank" style="background:#007cba; color:white; padding:8px 16px; text-decoration:none; border-radius:4px; font-size:14px;">
                                åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€
                            </a>
                        </div>
                    </div>`;
                } else if (device.isAndroid) {
                    // Android
                    html = `
                    <div class="dcmp-pdf-android-container" style="width:100%; height:400px; border:1px solid #ccc; background:#f9f9f9; position:relative; border-radius:8px; overflow:hidden;">
                        <div style="position:absolute; top:10px; right:10px; z-index:1000;">
                            <a href="${testPdfUrl}" target="_blank" style="background:#007cba; color:white; padding:6px 12px; text-decoration:none; border-radius:4px; font-size:12px; box-shadow:0 2px 4px rgba(0,0,0,0.2);">
                                æ–°çª—å£
                            </a>
                        </div>
                        <div style="padding:20px; text-align:center; height:100%; display:flex; flex-direction:column; justify-content:center;">
                            <div style="font-size:48px; margin-bottom:20px;">ğŸ“„</div>
                            <h3>Android PDFæŸ¥çœ‹å™¨</h3>
                            <p>æ­£åœ¨åŠ è½½PDF.js...</p>
                            <div style="margin-top:20px;">
                                <a href="${testPdfUrl}" target="_blank" style="background:#28a745; color:white; padding:10px 20px; text-decoration:none; border-radius:4px;">
                                    ä¸‹è½½æŸ¥çœ‹
                                </a>
                            </div>
                        </div>
                    </div>`;
                } else {
                    // å…¶ä»–ç§»åŠ¨è®¾å¤‡
                    html = `
                    <div class="dcmp-pdf-generic-container" style="width:100%; height:400px; border:1px solid #ccc; background:#f9f9f9; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px; box-sizing:border-box; border-radius:8px;">
                        <div style="font-size:48px; margin-bottom:20px; color:#666;">ğŸ“„</div>
                        <h3 style="margin:0 0 15px 0; color:#333;">é€šç”¨ç§»åŠ¨ç«¯PDFæŸ¥çœ‹å™¨</h3>
                        <p style="margin:0 0 20px 0; color:#666; line-height:1.4;">
                            ç§»åŠ¨è®¾å¤‡ä¸ŠæŸ¥çœ‹PDFå¯èƒ½å—åˆ°é™åˆ¶<br>
                            å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ‰“å¼€æ–‡æ¡£
                        </p>
                        <div style="display:flex; flex-direction:column; gap:10px; width:100%; max-width:250px;">
                            <a href="${testPdfUrl}" target="_blank" style="background:#007cba; color:white; padding:12px 20px; text-decoration:none; border-radius:5px; font-size:16px; display:block;">
                                ğŸ”— åœ¨æ–°çª—å£æ‰“å¼€
                            </a>
                            <a href="${testPdfUrl}" download style="background:#28a745; color:white; padding:12px 20px; text-decoration:none; border-radius:5px; font-size:16px; display:block;">
                                ğŸ“¥ ä¸‹è½½æŸ¥çœ‹
                            </a>
                        </div>
                        <small style="margin-top:15px; color:#999; font-size:12px;">
                            æŸäº›è®¾å¤‡å¯èƒ½éœ€è¦å®‰è£…PDFé˜…è¯»å™¨åº”ç”¨
                        </small>
                    </div>`;
                }
            } else {
                // æ¡Œé¢ç«¯
                html = `
                <div style="width:100%; height:400px; border:1px solid #ccc; border-radius:5px; overflow:hidden;">
                    <iframe src="${testPdfUrl}" style="width:100%; height:100%; border:none;"></iframe>
                </div>`;
            }
            
            // æ·»åŠ æ°´å°
            html = `
            <div class="dcmp-media-container dcmp-pdf-container" style="position:relative; max-width:100%; overflow:hidden;">
                ${html}
                <div class="dcmp-watermark">æ•°å­—ä¸­å›½</div>
            </div>`;
            
            return html;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            const device = detectDevice();
            
            // æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
            document.getElementById('device-details').innerHTML = `
                ${device.isMobile ? 'ç§»åŠ¨è®¾å¤‡' : 'æ¡Œé¢è®¾å¤‡'} | 
                ${device.isIOS ? 'iOS' : device.isAndroid ? 'Android' : 'å…¶ä»–'} | 
                ${device.isSafari ? 'Safari' : device.isChrome ? 'Chrome' : device.isFirefox ? 'Firefox' : 'å…¶ä»–æµè§ˆå™¨'} |
                ${device.viewportWidth}x${device.viewportHeight}
            `;
            
            // ç”ŸæˆPDFæŸ¥çœ‹å™¨
            document.getElementById('pdf-test-1').innerHTML = generateMobilePdfViewer();
            
            // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
            document.getElementById('debug-info').innerHTML = `
æ£€æµ‹åˆ°çš„è®¾å¤‡ç±»å‹: ${JSON.stringify(device, null, 2)}

æœŸæœ›è¡Œä¸º:
- iOS Safari: æ˜¾ç¤ºåŸç”ŸPDFæŸ¥çœ‹å™¨ç•Œé¢
- Android: æ˜¾ç¤ºPDF.jsåŠ è½½ç•Œé¢  
- æ¡Œé¢ç«¯: æ˜¾ç¤ºä¼ ç»Ÿiframe
- å…¶ä»–ç§»åŠ¨è®¾å¤‡: æ˜¾ç¤ºé€šç”¨PDFæŸ¥çœ‹å™¨

å®é™…æ˜¾ç¤º: è¯·æ£€æŸ¥ä¸Šæ–¹PDFæµ‹è¯•åŒºåŸŸçš„å†…å®¹
            `;
        });
    </script>
</body>
</html> 